From 82e12df79fcb63ebc28e8141fefb60440b6c3c77 Mon Sep 17 00:00:00 2001
From: Marcin Juszkiewicz <hrw@openedhand.com>
Date: Wed, 30 May 2007 09:33:32 +0000
Subject: [PATCH] perl: sync with OE

Upstream-Status:Inappropriate [embedded specific]

---
 cpan/ExtUtils-MakeMaker/lib/ExtUtils/MM_Unix.pm | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/cpan/ExtUtils-MakeMaker/lib/ExtUtils/MM_Unix.pm b/cpan/ExtUtils-MakeMaker/lib/ExtUtils/MM_Unix.pm
index 0344194..e9d475d 100644
--- a/cpan/ExtUtils-MakeMaker/lib/ExtUtils/MM_Unix.pm
+++ b/cpan/ExtUtils-MakeMaker/lib/ExtUtils/MM_Unix.pm
@@ -1768,6 +1768,19 @@ from the perl source tree.
 	$self->{PERL_LIB}     ||= $Config{privlibexp};
 	$self->{PERL_ARCHLIB} ||= $Config{archlibexp};
 	$self->{PERL_INC}     = $self->catdir("$self->{PERL_ARCHLIB}","CORE"); # wild guess for now
+	# Check for environment override so we'll find the headers in the correct place
+        if (defined $ENV{PERL_LIB})
+        {
+            $self->{PERL_LIB} = $ENV{PERL_LIB};
+        }
+        if (defined $ENV{PERL_ARCHLIB})
+        {
+            $self->{PERL_ARCHLIB} = $ENV{PERL_ARCHLIB};
+        }
+        if (defined $ENV{PERL_INC})
+        {
+            $self->{PERL_INC} = $ENV{PERL_INC};
+        }
 	my $perl_h;
 
 	if (not -f ($perl_h = $self->catfile($self->{PERL_INC},"perl.h"))
